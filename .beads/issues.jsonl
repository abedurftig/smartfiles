{"id":"smartfiles-0l4","title":"Allow to delete documents","description":"Add a delete button to the document details panel (bottom right). When clicked, show a confirmation dialog to confirm or cancel the deletion.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T20:50:22.958997+01:00","created_by":"abedurftig","updated_at":"2026-01-07T21:20:46.995398+01:00","closed_at":"2026-01-07T21:20:46.995413+01:00","dependencies":[{"issue_id":"smartfiles-0l4","depends_on_id":"smartfiles-7tf","type":"relates-to","created_at":"2026-01-11T12:31:10.582956+01:00","created_by":"abedurftig"}]}
{"id":"smartfiles-0r7","title":"Missing input validation for tag creation","description":"In ArchiveServiceImpl.addTag() (lines 86-93), there's no validation that the tag text is non-null, non-empty, or sanitized. Users could add empty tags, tags with only whitespace, or excessively long tags.\n\n**Fix:** Validate tag input:\n- Trim whitespace\n- Reject empty/blank strings\n- Consider max length limit\n- Normalize case (optional)","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:00.023548+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:00.023548+01:00"}
{"id":"smartfiles-1","title":"Allow to edit document description","description":"In the bottom right, there should be a label showing the document description. I can just click on the label and it become editable. When I hit enter the changes are saved and the label is no longer editable. The document description in the list of the left should update accordingly.\n\n**Acceptance Criteria:**\n- Add a unit test for the business layer\n- Add a unit test for the UI model","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-06T20:21:57Z","updated_at":"2026-01-06T20:27:52Z","closed_at":"2026-01-06T20:27:52Z","close_reason":"Implemented editable document description feature with unit tests"}
{"id":"smartfiles-177","title":"NullPointerException risk in getSelectedDocumentId","description":"ApplicationModel.getSelectedDocumentId() (line 107-109) calls selectedDocumentProperty.get().getId() without null checking. If called when no document is selected, this throws NPE.\n\n**File:** ApplicationModel.java (lines 107-109)\n\n**Fix:** Return null or Optional.empty() when no document is selected.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:35:53.857787+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:35:53.857787+01:00"}
{"id":"smartfiles-2","title":"Improve click elsewhere to cancel editing of description","description":"In beads issue smartfiles-1 we introduced a feature to edit the document description. Edit mode is enabled by just clicking on the label. Enter would confirm the changes. Clicking elsewhere should cancel the editing.\n\n**Current behavior:**\n- Editing is cancelled when user clicks on the document view\n- Editing is NOT cancelled when clicking anywhere on the right scroll pane\n\n**Expected behavior:**\n- Clicking anywhere outside the description field should cancel editing mode\n\n**Related:** smartfiles-1","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-06T20:36:45Z","updated_at":"2026-01-06T20:38:46Z","closed_at":"2026-01-06T20:38:46Z","close_reason":"Fixed: Made right panel VBoxes focusable and added mouse handlers to request focus when clicked. Also added logic to reset unsaved changes when focus is lost.","dependencies":[{"issue_id":"smartfiles-2","depends_on_id":"smartfiles-1","type":"discovered-from","created_at":"2026-01-06T20:37:04Z","created_by":"claude","metadata":"{}"}]}
{"id":"smartfiles-40c","title":"TagAddedEvent handler is empty and unused","description":"The handleTagAddedEvent method in ApplicationInteractor.java (line 46-47) has an empty body. The event is defined in the sealed class hierarchy but produces no behavior.\n\n**Fix:** Either implement the handler or remove the event type if it's not needed.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:36:40.707836+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:40.707836+01:00"}
{"id":"smartfiles-412","title":"ArchiveEntry.of() creates immutable empty tag set","description":"ArchiveEntry.of() (line 31) uses Set.of() which creates an immutable set. When addTag() tries to add to this set, it will throw UnsupportedOperationException.\n\nThe test code works around this by calling entry.setTags(new HashSet\u003c\u003e()) before adding tags, but this is fragile.\n\n**File:** ArchiveEntry.java (line 31)\n\n**Fix:** Change Set.of() to new HashSet\u003c\u003e() in the factory method.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-15T22:35:24.189652+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:35:24.189652+01:00"}
{"id":"smartfiles-50j","title":"Archive.tags field is unused dead code","description":"The Archive class has a tags field (line 25) that is initialized to Set.of() in empty() but is never populated or used anywhere. Tags are stored per-document in ArchiveEntry.tags.\n\n**Fix:** Remove the unused field or implement archive-level tags if needed.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-15T22:37:27.003705+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:27.003705+01:00"}
{"id":"smartfiles-64m","title":"Unbounded image cache in PdfImageRenderer","description":"PdfImageRenderer.imageCache (line 19) grows without limit as pages are rendered. For large PDFs with many pages, this could consume significant memory. There's no LRU eviction or size limit.\n\n**Fix:** Implement bounded cache with LRU eviction (e.g., LinkedHashMap with removeEldestEntry or Caffeine cache).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:36:57.905578+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:57.905578+01:00"}
{"id":"smartfiles-7tf","title":"Tag filter not cleared when last document with that tag is deleted","description":"When a document is the only result of a tag filter and that document is deleted, the tag filter remains selected but becomes invalid. No documents are visible and the user cannot unselect the tag filter. The selectedFilterTags set should be cleaned up when tags are removed from the available tags.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T12:30:52.207273+01:00","created_by":"abedurftig","updated_at":"2026-01-11T12:33:20.182054+01:00","closed_at":"2026-01-11T12:33:20.182065+01:00","dependencies":[{"issue_id":"smartfiles-7tf","depends_on_id":"smartfiles-0l4","type":"relates-to","created_at":"2026-01-11T12:31:10.566697+01:00","created_by":"abedurftig"}]}
{"id":"smartfiles-83n","title":"TagListCell class is never used","description":"TagListCell.java exists but is never instantiated anywhere in the codebase. Tags are displayed using WrappingListView with Label components instead.\n\n**Fix:** Delete the unused class or refactor WrappingListView to use it.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-15T22:37:32.306739+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:32.306739+01:00"}
{"id":"smartfiles-9cq","title":"Clean up commented code and unused CSS styles","description":"Several instances of commented-out code that should be cleaned up:\n- SmartFilesApp.java lines 56-62: commented-out theme methods\n- DocumentView.java line 32: commented style class assignment\n- application.css line 38: .sf-area-label is empty\n- application.css lines 5-9: .sf-outer-vbox with yellow border (debug style?)\n\n**Fix:** Remove dead code and unused styles.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-15T22:37:21.540845+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:21.540845+01:00"}
{"id":"smartfiles-9dp","title":"PDF rendering errors silently swallowed","description":"In DocumentView.viewFile() (lines 64-68), exceptions during PdfImageRenderer creation are caught and the method simply returns without informing the user why the document cannot be viewed. Similarly, renderTask.setOnFailed() only prints to stderr (line 133-137).\n\n**Fix:** Show user-friendly error message when PDF cannot be rendered (e.g. corrupted file, unsupported format).","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:35:48.857389+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:35:48.857389+01:00"}
{"id":"smartfiles-9n1","title":"Inconsistent null handling in archive operations","description":"Some methods check for null (e.g., deleteDocument line 116), while others don't (e.g., addTag line 87, updateDescription line 97). If an invalid UUID is passed, these will throw NPE.\n\n**File:** ArchiveServiceImpl.java (lines 87, 97)\n\n**Fix:** Add consistent null checks or use Optional pattern across all archive operations.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:29.026652+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:29.026652+01:00"}
{"id":"smartfiles-a16","title":"File copy failures provide no user feedback","description":"In ArchiveServiceImpl.manageFiles() (lines 50-58), IOExceptions during file copy are caught and re-thrown as RuntimeException. This crashes the entire operation for multiple files if one fails, and provides no user-friendly error handling.\n\n**Fix:** \n1. Continue processing remaining files if one fails\n2. Collect failures and report them to user\n3. Consider publishing an error event for the UI to display","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:35:42.875305+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:35:42.875305+01:00"}
{"id":"smartfiles-blx","title":"FileAlreadyExistsException when importing duplicate filenames","description":"In ArchiveServiceImpl.manageFiles() (line 52), Files.copy() is called without specifying behavior for existing files. If a file with the same name already exists in the archive, this will throw FileAlreadyExistsException.\n\n**Fix:** Either:\n1. Use REPLACE_EXISTING option\n2. Generate unique filename (add suffix)\n3. Prompt user for action","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:23.292807+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:23.292807+01:00"}
{"id":"smartfiles-bvs","title":"Path separator hardcoded breaks Windows compatibility","description":"ArchiveEntry.of() (line 29) uses hardcoded '/' to extract filename: absolutePath.substring(absolutePath.lastIndexOf('/') + 1). This will fail on Windows where paths use backslashes.\n\nMeanwhile, SmartFilesConfiguration.java correctly uses FileSystems.getDefault().getSeparator().\n\n**Fix:** Use File.separator or Path.getFileName() instead of hardcoded '/'.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:11.37771+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:11.37771+01:00"}
{"id":"smartfiles-djt","title":"Missing test coverage for UI components","description":"There are no tests for:\n- ApplicationViewBuilder\n- ApplicationInteractor\n- DocumentView\n- PdfImageRenderer\n- TagFilterView\n- WrappingListView\n- DocumentListCell\n- TagListCell\n\nWhile UI testing can be complex, at minimum the ApplicationInteractor event handling logic should be unit tested.\n\n**Fix:** Add unit tests for ApplicationInteractor event handling. Consider TestFX for UI component tests.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:37:10.739326+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:10.739326+01:00"}
{"id":"smartfiles-h74","title":"PDDocument resources never closed causing memory leak","description":"In PdfImageRenderer.java, PDDocument objects are loaded but never closed. The renderers HashMap in DocumentView.java caches PdfImageRenderer instances indefinitely. \n\nPDFBox documents hold native resources that should be explicitly closed to prevent memory leaks, especially when opening many different PDFs.\n\n**Files:**\n- PdfImageRenderer.java (line 22-25)\n- DocumentView.java (line 26)\n\n**Fix:** Implement proper resource lifecycle management. Consider:\n1. Closing PDDocument when switching documents\n2. Implementing a cache eviction strategy\n3. Using try-with-resources or explicit close on application exit","status":"open","priority":1,"issue_type":"bug","created_at":"2026-01-15T22:32:53.008106+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:32:53.008106+01:00"}
{"id":"smartfiles-hj5","title":"Display the dateCreated and dateLastModified of the archive itself","description":"Create a footer area across the full width and display the dateCreated and dateLastModified of the Archive itself","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T21:33:33.098999+01:00","created_by":"abedurftig","updated_at":"2026-01-07T21:53:02.388736+01:00","closed_at":"2026-01-07T21:53:02.38875+01:00"}
{"id":"smartfiles-i6y","title":"Add configurable inbox folder setting","description":"Introduce an inbox folder feature where smartfiles will automatically import PDF files after startup. The folder path is configurable in the settings dialog with the default being the user's Downloads folder on macOS (~/).\n\n**Scope for this issue (first step):**\n- Add inbox folder path to persisted settings (settings.json)\n- Add inbox folder configuration to the settings dialog\n- When folder is modified and confirmed, persist to settings.json\n- Default value: user home downloads folder on macOS\n\n**Future work (separate issues):**\n- Automatic import of PDFs from inbox folder on startup","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T22:01:36.878412+01:00","created_by":"abedurftig","updated_at":"2026-01-11T22:04:23.85807+01:00","closed_at":"2026-01-11T22:04:23.85807+01:00","close_reason":"Closed"}
{"id":"smartfiles-mdx","title":"PDF rendering uses fixed high DPI regardless of display","description":"PdfImageRenderer.renderPage() (line 40) uses dpi = 150 * 1.0 * 2.0 = 300 DPI unconditionally. This creates large images even for standard displays, consuming more memory and CPU than necessary.\n\n**Fix:** Detect actual display DPI and scale appropriately, or make DPI configurable.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:37:04.349155+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:04.349155+01:00"}
{"id":"smartfiles-t88","title":"No file type validation on drag and drop","description":"handleDragDropped in ApplicationViewBuilder.java (lines 405-414) passes all dropped files to archiveService.manageFiles() without validating they are PDF files. While DocumentView.viewFile() checks for .pdf extension, the files are already copied to the archive at that point.\n\n**Fix:** Filter files by extension before passing to archive service, or show warning for non-PDF files.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:05.469373+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:05.469373+01:00"}
{"id":"smartfiles-tre","title":"DateTimeFormatter duplicated across classes","description":"DateTimeFormatter.ofPattern(\"MMM d, yyyy 'at' HH:mm\") is defined identically in both:\n- ApplicationInteractor.java (line 11)\n- AppConfiguration.java (line 13)\n\nThis should be centralized to avoid inconsistency if the format needs to change.\n\n**Fix:** Create a single shared constant or utility class for date formatting.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:36:46.434919+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:46.434919+01:00"}
{"id":"smartfiles-u4i","title":"Apply consistent tag styling between filter and document views","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T21:49:21.617484+01:00","created_by":"abedurftig","updated_at":"2026-01-11T21:53:15.289719+01:00","closed_at":"2026-01-11T21:53:15.289719+01:00","close_reason":"Closed"}
{"id":"smartfiles-vap","title":"Missing Platform.runLater in ApplicationInteractor event handlers","description":"In ApplicationInteractor.java, most event handlers correctly use Platform.runLater() to update the model on the JavaFX Application Thread. However, two handlers do not:\n\n- handleDocumentTagAddedEvent (line 49-51) calls model.updateDocumentTags() directly\n- handleArchiveEntryAddedEvent (line 61-64) calls model.addDocumentFromArchiveEntry() directly\n\nSince Spring events can be published from any thread, these could cause UI updates from non-FX threads, leading to race conditions or crashes.\n\n**Fix:** Wrap these calls in Platform.runLater().","status":"in_progress","priority":1,"issue_type":"bug","created_at":"2026-01-15T22:32:45.051937+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:55:26.278298+01:00"}
{"id":"smartfiles-w73","title":"Maven compiler plugin source/target mismatch","description":"In pom.xml, the properties define java.version=25 and maven.compiler.source/target=25, but the maven-compiler-plugin configuration explicitly sets source=22 and target=22 (lines 129-130), contradicting the properties.\n\n**Fix:** Remove explicit source/target from plugin config to use the property values, or update to match.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:36:17.931659+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:17.931659+01:00"}
{"id":"smartfiles-we7","title":"Display document details dateLastModified and dateCreated in the document details","description":"Display the dateCreated and dateLastModified of the selected document in the document details in the bottom right.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-07T21:31:02.161058+01:00","created_by":"abedurftig","updated_at":"2026-01-07T21:32:30.284216+01:00"}
{"id":"smartfiles-wyr","title":"Window size and position not persisted","description":"The application starts with fixed dimensions (1024x768) and does not save/restore window size or position. This is a user experience issue as preferences are lost on restart.\n\n**File:** SmartFilesApp.java (lines 22-23)\n\n**Fix:** Save window bounds to settings on close, restore on startup.","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-15T22:37:37.871391+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:37:37.871391+01:00"}
{"id":"smartfiles-yes","title":"Theme change event handler inconsistent with threading pattern","description":"handleLightThemeActivatedSettingsChangedEvent (lines 57-59) modifies the model directly without Platform.runLater(). While the theme toggle is likely called from the UI thread, the pattern should be consistent for safety.\n\n**Fix:** Wrap in Platform.runLater() for consistency with other handlers.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-15T22:36:52.962703+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:36:52.962703+01:00"}
{"id":"smartfiles-yo2","title":"APP_EXECUTOR thread pool never shutdown on exit","description":"ApplicationViewBuilder.APP_EXECUTOR is a static CachedThreadPool that is never shut down when the application exits. This can prevent clean JVM shutdown and leak threads.\n\n**File:** ApplicationViewBuilder.java (line 39)\n\n**Fix:** Register a shutdown hook or use Spring's @PreDestroy to call APP_EXECUTOR.shutdown() on application exit.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-15T22:35:36.312096+01:00","created_by":"abedurftig","updated_at":"2026-01-15T22:35:36.312096+01:00"}
